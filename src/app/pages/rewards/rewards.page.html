<ion-content [fullscreen]="true" class="rewards-content">
  <div class="overlay"></div>

  <!-- 🔹 Header -->
  <div class="header">
    <img src="/assets/img/logo1.png" alt="Logo" class="logo" />
    <h2 class="titulo">¡Tu Pedido Divertido 🍕!</h2>
  </div>

  <!-- 🔹 Lista de productos -->
  <div class="menu-container">
    <div
      class="menu-card"
      *ngFor="let item of items"
      [ngClass]="{ 'combo-special': item.isCombo }"
    >
      <!-- Imagen del producto -->
      <div class="item-img">
        <img [src]="item.image" [alt]="item.name" />
        <img
          *ngIf="item.character"
          [src]="item.character"
          class="character-icon"
          alt="personaje"
        />
      </div>

      <!-- Detalle -->
      <div class="item-info">
        <h3 class="item-name">{{ item.name }}</h3>
        <p class="item-desc">{{ item.description }}</p>
        <h4 class="item-price">${{ item.price | number: '1.0-0' }}</h4>
      </div>

      <!-- Controles -->
      <div class="quantity-controls">
        <ion-button fill="solid" color="light" (click)="decrease(item)">-</ion-button>
        <span class="quantity">{{ item.quantity }}</span>
        <ion-button fill="solid" color="light" (click)="increase(item)">+</ion-button>
      </div>
    </div>
  </div>

  <!-- 🔹 Carrito flotante -->
  <div class="cart-fab" (click)="openCart()">
    <ion-icon name="cart"></ion-icon>
    <span class="cart-count">{{ cartCount }}</span>
  </div>

  <!-- 🔹 Modal del carrito -->
  <ion-modal *ngIf="open" class="cart-modal" [presentingElement]="presentingElement">
    <ion-header>
      <ion-toolbar color="light">
        <ion-title>🛒 Tu Pedido</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="open = false">Cerrar</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <ion-content class="ion-padding">
      <div *ngIf="cartItems.length > 0; else empty">
        <ion-list>
          <ion-item *ngFor="let item of cartItems">
            <ion-thumbnail slot="start">
              <img [src]="item.image" />
            </ion-thumbnail>
            <ion-label>
              <h3>{{ item.name }}</h3>
              <p>x{{ item.quantity }} — ${{ item.price * item.quantity | number: '1.0-0' }}</p>
            </ion-label>
          </ion-item>
        </ion-list>

        <h2 class="total">Total: ${{ total | number: '1.0-0' }}</h2>

        <ion-button expand="block" color="primary" (click)="goToVoucher()">
          Pagar 🎟️
        </ion-button>
      </div>

      <ng-template #empty>
        <div class="empty-cart">
          <p>Tu carrito está vacío 😅</p>
        </div>
      </ng-template>
    </ion-content>
  </ion-modal>
</ion-content>
