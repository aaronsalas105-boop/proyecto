<ion-content [fullscreen]="true" class="reserview-content">
  <div class="overlay"></div>

  <!-- 游댳 Bot칩n volver -->
  <button class="btn-volver" (click)="volver()">
    <ion-icon name="arrow-back-outline"></ion-icon>
  </button>

  <div class="header">
    <h2>Detalles de tu Reserva</h2>
  </div>

  <!-- Estado de carga -->
  <div *ngIf="cargando" class="loading">Cargando reserva...</div>

  <!-- Si hay reservas -->
  <div *ngIf="!cargando && reservas.length > 0" class="reserva-detalle">
    <div class="reserva-card" *ngFor="let r of reservas">
      <h3 class="codigo">#CEC-{{ r.id }}</h3>

      <div class="info">
        <p><strong>Evento:</strong> Cumplea침os de {{ r.nombre || 'Tu reserva' }}</p>
        <p><strong>Fecha:</strong> {{ r.fecha | date:'EEEE, d \'de\' MMMM \'-\'' }} {{ r.hora || '17:00' }} hrs</p>
        <p><strong>Sucursal:</strong> {{ r.sede || 'Sin sede' }}</p>
        <p><strong>Paquete:</strong> {{ r.paquete }}</p>
      </div>

      <h4 class="subtitulo">Editar tu reserva</h4>
      <div class="inputs">
        <label>N칰mero de ni침os:</label>
        <input 
          type="number"
          [(ngModel)]="r.invitados"
          min="1"
          (input)="verificarLimites(r)"
        />
        <small *ngIf="r.invitados > 10" style="color: #d4151f; font-size: 0.8rem;">
          丘멆잺 M치ximo 10 ni침os permitidos.
        </small>

        <label>N칰mero de adultos:</label>
        <input 
          type="number"
          [(ngModel)]="r.adultos"
          min="0"
          (input)="verificarLimites(r)"
        />
        <small *ngIf="r.adultos > 2" style="color: #d4151f; font-size: 0.8rem;">
          丘멆잺 M치ximo 2 adultos permitidos.
        </small>
      </div>

      <h4 class="subtitulo">A침ade extras a tu fiesta</h4>
      <div class="extras">
        <label><input type="checkbox" /> Pizza Familiar Extra (+$12.990)</label>
        <label><input type="checkbox" /> Torta de Chocolate (+$15.000)</label>
        <label><input type="checkbox" /> 10 Bolsitas de Dulces (+$9.990)</label>
      </div>

      <ion-button
        expand="block"
        class="btn-actualizar"
        (click)="actualizarReserva(r)">
        Actualizar Reserva
      </ion-button>

      <ion-button
        expand="block"
        color="danger"
        fill="solid"
        class="btn-cancelar"
        (click)="cancelarReserva(r.id)">
        Cancelar Reserva
      </ion-button>

      <p class="nota">
        * Para cambiar la fecha u hora, por favor contacta directamente a la sucursal.
      </p>
    </div>
  </div>

  <!-- Sin reservas -->
  <div *ngIf="!cargando && reservas.length === 0" class="sin-reservas">
    <p>No tienes reservas registradas a칰n.</p>
  </div>
</ion-content>
